<div class="chat-bubble">
  <!-- <div class="chat-bubble__button" (click)="toggleChat()" [class.chat-bubble__button--active]="isOpen"><svg class="chat-bubble__icon" viewBox="0 0 24 24" fill="currentColor"><path d="M20 2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h4l4 4 4-4h4c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg><div class="chat-bubble__close-icon" *ngIf="isOpen"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></div></div>--><!-- <div class="chat-bubble__window" [class.chat-bubble__window--open]="isOpen" [class.chat-bubble__window--fullscreen]="isFullscreen"> -->
  <div
    [class.chat-bubble__window--open]="isOpen"
    [class.chat-bubble__window--fullscreen]="isFullscreen"
  >
    <!-- Header --><!-- <div class="chat-bubble__header"><h3 class="chat-bubble__title">Chat Support</h3><div class="chat-bubble__header-right"><div class="chat-bubble__status"><span class="chat-bubble__status-indicator"></span><span class="chat-bubble__status-text">Online</span></div><button class="chat-bubble__expand-button" (click)="toggleFullscreen()" [attr.aria-label]="isFullscreen ? 'Minimize' : 'Expand'"><svg *ngIf="!isFullscreen" viewBox="0 0 24 24" fill="currentColor"><path d="M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"/></svg><svg *ngIf="isFullscreen" viewBox="0 0 24 24" fill="currentColor"><path d="M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"/></svg></button><button class="chat-bubble__close-button" (click)="toggleChat()"><svg viewBox="0 0 24 24" fill="currentColor"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></div></div> --><!-- Messages -->
    <div class="chat-bubble__messages">
      <div
        *ngFor="let message of messages"
        class="chat-bubble__message-wrapper"
        [ngClass]="'chat-bubble__message-wrapper--' + message.type"
      >
        <div
          class="chat-bubble__message"
          [ngClass]="'chat-bubble__message--' + message.type"
        >
          <div class="chat-bubble__message-content">
            <div
              *ngIf="message.htmlContent"
              [innerHTML]="message.htmlContent"
            ></div>
            <div *ngIf="!message.htmlContent">{{ message.text }}</div>
          </div>
          <div class="chat-bubble__message-time">
            {{ message.timestamp | date : "short" }}
          </div>
        </div>
      </div>
      <!-- Typing Indicator -->
      <div
        class="chat-bubble__message-wrapper chat-bubble__message-wrapper--system"
        *ngIf="isTyping"
      >
        <div class="chat-bubble__message chat-bubble__message--system">
          <div class="chat-bubble__typing-indicator">
            <span></span><span></span><span></span>
          </div>
        </div>
      </div>
    </div>
    <!-- Suggestion Chips - Fixed Position Above Input -->
    <div class="chat-bubble__chips-fixed">
      <div class="chat-bubble__chips-label">Suggested questions:</div>
      <div class="chat-bubble__chips-container">
        <button
          *ngFor="let chip of chips"
          class="chat-bubble__chip"
          (click)="onChipClick(chip)"
        >
          {{ chip.text }}
        </button>
      </div>
    </div>
    <!-- Input -->
    <div class="chat-bubble__input-container">
      <textarea
        class="chat-bubble__input"
        [(ngModel)]="newMessage"
        (keypress)="onKeyPress($event)"
        placeholder="Type your message..."
        rows="1"
      ></textarea
      ><button
        class="chat-bubble__send-button"
        (click)="sendMessage()"
        [disabled]="!newMessage.trim()"
      >
        <svg viewBox="0 0 24 24" fill="currentColor">
          <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z" />
        </svg>
      </button>
    </div>
  </div>
</div>
