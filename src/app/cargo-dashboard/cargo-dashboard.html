<div class="cargo-dashboard">
  <main class="cargo-dashboard__main">
    <div class="dashboard-container">
      <!-- Predictions Card -->
      <div class="predictions-card">
        <h2>7-Day ULD Count Predictions</h2>
        
        <!-- Day Selector (Scrollable Tabs) -->
        <div class="day-selector">
          <button
            *ngFor="let day of [1,2,3,4,5,6,7]"
            class="day-btn"
            [class.active]="selectedDay === day"
            (click)="selectDay(day)"
          >
            Day {{day}}
          </button>
        </div>

        <!-- Chart Container -->
        <div class="chart-container">
          <ejs-chart
            id="prediction-chart"
            [primaryXAxis]="primaryXAxis"
            [primaryYAxis]="primaryYAxis"
            [tooltip]="tooltip"
            [title]="chartTitle"
            height="280px"
            [background]="'transparent'"
            [enableAnimation]="true"
          >
            <e-series-collection>
              <e-series
                [dataSource]="predictionData"
                type="Spline"
                xName="day"
                yName="count"
                name="ULD Count"
                [marker]="marker"
                fill="#667eea"
                width="3"
              >
              </e-series>
            </e-series-collection>
          </ejs-chart>
        </div>
      </div>

      <!-- Stats Overview Grid -->
      <div class="cargo-dashboard__stats-overview">
        <!-- Active Shipments Card -->
        <div class="cargo-dashboard__stat-card cargo-dashboard__stat-card--shipments" (click)="onCardClick('shipments')">
          <ng-container *ngIf="!loader; else loaderTemplate">
            <div class="cargo-dashboard__card-content">
              <div class="cargo-dashboard__card-icon">üì¶</div>
              <div class="cargo-dashboard__stat-value">{{ dashboardData.totalShipments }}</div>
              <div class="cargo-dashboard__stat-label">Active Shipments</div>
              <div class="cargo-dashboard__stat-trend" 
                   [class.cargo-dashboard__stat-trend--up]="checkUpTrendClass(dashboardData.totalShipmentUpDown)"
                   [class.cargo-dashboard__stat-trend--down]="!checkUpTrendClass(dashboardData.totalShipmentUpDown)">
                <span class="cargo-dashboard__trend-icon">{{ checkUpTrendClass(dashboardData.totalShipmentUpDown) ? '‚ÜóÔ∏è' : '‚ÜòÔ∏è' }}</span>
                {{dashboardData.totalShipmentUpDown}}
              </div>
            </div>
          </ng-container>
          <ng-template #loaderTemplate>
            <app-loader></app-loader>
          </ng-template>
        </div>

        <!-- On-Time Performance Card -->
        <div class="cargo-dashboard__stat-card cargo-dashboard__stat-card--performance" (click)="onCardClick('performance')">
          <ng-container *ngIf="!loader; else loaderTemplate">
            <div class="cargo-dashboard__card-content">
              <div class="cargo-dashboard__card-icon">‚è±Ô∏è</div>
              <div class="cargo-dashboard__stat-value">{{ dashboardData.onTimePerformance }}%</div>
              <div class="cargo-dashboard__stat-label">On-Time Performance</div>
              <div class="cargo-dashboard__stat-trend"
                   [class.cargo-dashboard__stat-trend--up]="checkUpTrendClass(dashboardData.onTimePerformanceUpDown)"
                   [class.cargo-dashboard__stat-trend--down]="!checkUpTrendClass(dashboardData.onTimePerformanceUpDown)">
                <span class="cargo-dashboard__trend-icon">{{ checkUpTrendClass(dashboardData.onTimePerformanceUpDown) ? '‚ÜóÔ∏è' : '‚ÜòÔ∏è' }}</span>
                {{dashboardData.onTimePerformanceUpDown}}
              </div>
            </div>
          </ng-container>
          <ng-template #loaderTemplate>
            <app-loader></app-loader>
          </ng-template>
        </div>

        <!-- Monthly Revenue Card -->
        <div class="cargo-dashboard__stat-card cargo-dashboard__stat-card--revenue" (click)="onCardClick('revenue')">
          <ng-container *ngIf="!loader; else loaderTemplate">
            <div class="cargo-dashboard__card-content">
              <div class="cargo-dashboard__card-icon">üí∞</div>
              <div class="cargo-dashboard__stat-value">${{ dashboardData.revenue }}M</div>
              <div class="cargo-dashboard__stat-label">Monthly Revenue</div>
              <div class="cargo-dashboard__stat-trend"
                   [class.cargo-dashboard__stat-trend--up]="checkUpTrendClass(dashboardData.revenueUpDown)"
                   [class.cargo-dashboard__stat-trend--down]="!checkUpTrendClass(dashboardData.revenueUpDown)">
                <span class="cargo-dashboard__trend-icon">{{ checkUpTrendClass(dashboardData.revenueUpDown) ? '‚ÜóÔ∏è' : '‚ÜòÔ∏è' }}</span>
                {{dashboardData.revenueUpDown}}
              </div>
            </div>
          </ng-container>
          <ng-template #loaderTemplate>
            <app-loader></app-loader>
          </ng-template>
        </div>

        <!-- Active Alerts Card -->
        <div class="cargo-dashboard__stat-card cargo-dashboard__stat-card--alerts" (click)="onCardClick('alerts')">
          <ng-container *ngIf="!loader; else loaderTemplate">
            <div class="cargo-dashboard__card-content">
              <div class="cargo-dashboard__card-icon">üö®</div>
              <div class="cargo-dashboard__stat-value">{{ dashboardData.activeAlerts }}</div>
              <div class="cargo-dashboard__stat-label">Active Alerts</div>
              <div class="cargo-dashboard__stat-trend"
                   [class.cargo-dashboard__stat-trend--up]="checkUpTrendClass(dashboardData.activeAlertsUpDown)"
                   [class.cargo-dashboard__stat-trend--down]="!checkUpTrendClass(dashboardData.activeAlertsUpDown)">
                <span class="cargo-dashboard__trend-icon">{{ checkUpTrendClass(dashboardData.activeAlertsUpDown) ? '‚ÜóÔ∏è' : '‚ÜòÔ∏è' }}</span>
                {{dashboardData.activeAlertsUpDown}}
              </div>
            </div>
          </ng-container>
          <ng-template #loaderTemplate>
            <app-loader></app-loader>
          </ng-template>
        </div>
      </div>
    </div>
  </main>
</div>