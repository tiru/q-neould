 <div class="chart-container" [class.mobile]="isMobile" [class.tablet]="isTablet">
      <div class="header">
        <div class="filters-section">
          <div class="filter-group">
            <label>Airport:</label>
            <select [(ngModel)]="selectedOrigin" (change)="applyFilters()">
              <option *ngFor="let origin of availableOrigins" [value]="origin">{{origin}}</option>
            </select>
          </div>
          
          <!-- <div class="stats-summary">
             <span class="stat actual-stat">{{totalUlds}} Total ULDs</span>
             <span class="stat forecast-stat">{{totalForecastUlds}} Forecast ULDs</span>
          </div> -->
        </div>
        
        <div class="chart-info" *ngIf="!isMobile">
          <span class="info-text">Click points for ULD breakdown • Scroll to zoom</span>
        </div>
      </div>

      <div class="chart-wrapper">
        <ejs-chart 
          #chart
          id="uld-forecast-chart" 
          [primaryXAxis]="primaryXAxis" 
          [primaryYAxis]="primaryYAxis"
          [tooltip]="tooltip"
          [crosshair]="crosshair"
          [zoomSettings]="zoomSettings"
          [height]="chartHeight"
          [width]="chartWidth"
          (pointClick)="onPointClick($event)"
          [margin]="chartMargin"
          [chartArea]="chartArea"
          [border]="chartBorder"
          [legendSettings]="legendSettings">
          <e-series-collection>
            <e-series 
              [dataSource]="filteredData" 
              type="Line" 
              xName="depDate" 
              yName="uldCount"
              name="Actual ULD Count"
              [marker]="actualMarker"
              width="3"
              fill="#64043C"
              [animation]="animation">
            </e-series>
            <e-series 
              [dataSource]="filteredData" 
              type="Line" 
              xName="depDate" 
              yName="forecastUldCount"
              name="Forecast ULD Count"
              [marker]="forecastMarker"
              width="3"
              fill="#008000"
              [animation]="animation">
            </e-series>
          </e-series-collection>
        </ejs-chart>
      </div>

      <div *ngIf="selectedPoint" class="uld-details-panel" [class.mobile-panel]="isMobile">
        <div class="details-header">
          <h3 [class.mobile-title]="isMobile">
            {{ selectedPoint.orig }} - {{ selectedPoint.depDate | date:'MMM dd' }}
          </h3>
          <button (click)="closeDetails()" class="close-btn">×</button>
        </div>
        
        <div class="details-content">
          <div class="summary-card">
            <div class="card-header">
              <h4>Flight Summary</h4>
            </div>
            <div class="summary-grid">
              <div class="summary-item">
                <span class="label">Origin:</span>
                <span class="value">{{ selectedPoint.orig }}</span>
              </div>
              <div class="summary-item">
                <span class="label">Flights:</span>
                <span class="value">{{ selectedPoint.numberOfFlight }}</span>
              </div>
              <div class="summary-item">
                <span class="label">Actual ULDs:</span>
                <span class="value highlight actual">{{ selectedPoint.uldCount }}</span>
              </div>
              <div class="summary-item">
                <span class="label">Forecast ULDs:</span>
                <span class="value highlight forecast">{{ selectedPoint.forecastUldCount }}</span>
              </div>
              <div class="summary-item">
                <span class="label">Date/Time:</span>
                <span class="value">{{ selectedPoint.depDate | date:'MMM dd' }}</span>
              </div>
            </div>
          </div>

          <div class="uld-card">
            <div class="card-header">
              <h4>ULD Type Breakdown</h4>
            </div>
            <div class="uld-grid">
              <div class="uld-item" *ngFor="let uld of uldTypes" 
                   [class.active]="selectedPoint[uld.key] > 0">
                <div class="uld-label">{{ uld.label }}</div>
                <div class="uld-value" [class.has-value]="selectedPoint[uld.key] > 0">
                  {{ selectedPoint[uld.key] }}
                </div>
              </div>
            </div>
          </div>

          <div class="cargo-card">
            <div class="card-header">
              <h4>Cargo Details</h4>
            </div>
            <div class="cargo-grid">
              <div class="cargo-item">
                <span class="label">Pieces:</span>
                <span class="value">{{ selectedPoint.pcs | number }}</span>
              </div>
              <div class="cargo-item">
                <span class="label">Weight:</span>
                <span class="value">{{ selectedPoint.wt | number:'1.1-1' }} kg</span>
              </div>
              <div class="cargo-item">
                <span class="label">Volume:</span>
                <span class="value">{{ selectedPoint.vol | number:'1.2-2' }} m³</span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="selectedPoint" class="backdrop" (click)="closeDetails()"></div>
    </div>
    <ion-alert
      [isOpen]="isAlertOpen"
      trigger="present-alert"
      header="ULD"
      subHeader="ULD information Not available"
      message="ULD not available for current station"
      [buttons]="alertButtons"
      (didDismiss)="setOpen(false)"
    ></ion-alert>